<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReMind – Cognitive Screening</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-slate-900 font-sans">

  <header class="sticky top-0 z-50 bg-white/70 backdrop-blur border-b">
    <div class="max-w-7xl mx-auto px-4 flex h-16 items-center justify-between">
      <div class="flex items-center gap-3">
        <a href="index.html" class="flex items-center gap-3">
            <div class="h-9 w-9 grid place-items-center rounded-2xl bg-gradient-to-br from-indigo-500 via-violet-500 to-fuchsia-500 text-white shadow">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12h16M12 4v16"/></svg>
            </div>
            <span class="text-xl font-bold">ReMind</span>
        </a>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm font-medium text-slate-600">
        <a href="features.html" class="hover:text-slate-900">Features</a>
        <a href="index.html#product" class="hover:text-slate-900">Product</a>
        <a href="index.html#pricing" class="hover:text-slate-900">Pricing</a>
        <a href="screening.html" class="text-indigo-600 font-bold">Screening</a>
        <a href="contact.html" class="hover:text-slate-900">Contact</a>
        <a href="dashboard.html" class="bg-indigo-600 text-white px-4 py-2 rounded-2xl hover:bg-indigo-700 transition">Get Started</a>
      </nav>
    </div>
  </header>

  <section class="max-w-xl mx-auto px-4 py-20 min-h-[calc(100vh-64px)] flex items-center justify-center">
    <div class="w-full">
      <h1 class="text-3xl font-extrabold text-center mb-10">
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-fuchsia-600">Cognitive Wellness</span> Check
      </h1>

      <div id="quiz-container" class="bg-white p-8 rounded-2xl border shadow-xl">
        <div id="quiz-content"></div>

        <div id="quiz-result" class="hidden text-center">
          <h2 class="text-2xl font-bold text-slate-900 mb-4">Assessment Complete</h2>
          <p id="result-message" class="text-lg text-slate-600 mb-6"></p>
          <a href="index.html" class="bg-indigo-600 text-white px-6 py-3 rounded-2xl font-medium hover:bg-indigo-700 transition">Return to Home</a>
        </div>
      </div>
    </div>
  </section>

  <script>
    const questions = [
      { id: "d1", text: "How old are you?", category: "Demographics", type: "input", inputType: "number" },
      { id: "d2", text: "What is your sex?", category: "Demographics", type: "choice", options: [{l: "Male", v: 1}, {l: "Female", v: 2}] },
      { id: "m4", text: "Do you have insomnia?", category: "Sleep Health", type: "choice", options: [{l: "Never", v: 0}, {l: "Yes, recently", v: 1}, {l: "Yes, before", v: 2}] },
      { id: "m6", text: "Do you have neoplasm in your central nervous system?", category: "Medical History", type: "choice", options: [{l: "Yes, benign", v: 1}, {l: "Yes, malignant", v: 2}, {l: "No", v: 8}] },
      { id: "m8", text: "Rate your elation/euphoria:", category: "Mood", type: "choice", options: [{l: "None", v: -1}, {l: "Mild", v: 1}, {l: "Moderate", v: 2}, {l: "Severe", v: 3}] },
      { id: "m1", text: "Do you have nighttime behaviors? (sleep paralysis, sleepwalking, nightmares, etc.)", category: "Medical History", type: "choice", options: [{l: "Yes", v: 1}, {l: "No", v: 0}] },
      { id: "m2", text: "Are you afraid that something bad is going to happen to you?", category: "Psychological", type: "choice", options: [{l: "Yes", v: 1}, {l: "No", v: 0}] },
      { id: "m3", text: "Do you feel full of energy?", category: "General Health", type: "choice", options: [{l: "Yes", v: 1}, {l: "No", v: 0}] },
      { id: "m5", text: "Do you have motor disturbances? (Uncontrolled movements, difficulty with planned movements, etc.)", category: "Motor Function", type: "choice", options: [{l: "Yes", v: 1}, {l: "No", v: 0}] },
      { id: "m7", text: "Have you experienced disinhibition in the past month?", category: "Behavioral", type: "choice", options: [{l: "Yes", v: 1}, {l: "No", v: 0}] }
    ];

    const combos = [[0,-1,0,0,0,0,0],[0,-1,0,0,0,0,1],[0,-1,0,0,0,0,2],[0,-1,0,0,0,1,0],[0,-1,0,0,0,1,1],[0,-1,0,0,0,1,2],[0,-1,0,0,1,0,0],[0,-1,0,0,1,0,1],[0,-1,0,0,1,0,2],[0,-1,0,0,1,1,0],[0,-1,0,0,1,1,1],[0,-1,0,0,1,1,2],[0,-1,0,1,0,0,0],[0,-1,0,1,0,0,1],[0,-1,0,1,0,0,2],[0,-1,0,1,0,1,0],[0,-1,0,1,0,1,1],[0,-1,0,1,0,1,2],[0,-1,0,1,1,0,0],[0,-1,0,1,1,0,1],[0,-1,0,1,1,0,2],[0,-1,0,1,1,1,0],[0,-1,0,1,1,1,1],[0,-1,0,1,1,1,2],[0,-1,1,0,0,0,0],[0,-1,1,0,0,0,1],[0,-1,1,0,0,0,2],[0,-1,1,0,0,1,0],[0,-1,1,0,0,1,1],[0,-1,1,0,0,1,2],[0,-1,1,0,1,0,0],[0,-1,1,0,1,0,1],[0,-1,1,0,1,0,2],[0,-1,1,0,1,1,0],[0,-1,1,0,1,1,1],[0,-1,1,0,1,1,2],[0,-1,1,1,0,0,0],[0,-1,1,1,0,0,1],[0,-1,1,1,0,0,2],[0,-1,1,1,0,1,0],[0,-1,1,1,0,1,1],[0,-1,1,1,0,1,2],[0,-1,1,1,1,0,0],[0,-1,1,1,1,0,1],[0,-1,1,1,1,0,2],[0,-1,1,1,1,1,0],[0,-1,1,1,1,1,1],[0,-1,1,1,1,1,2],[0,1,0,0,0,0,0],[0,1,0,0,0,0,1],[0,1,0,0,0,0,2],[0,1,0,0,0,1,0],[0,1,0,0,0,1,1],[0,1,0,0,0,1,2],[0,1,0,0,1,0,0],[0,1,0,0,1,0,1],[0,1,0,0,1,0,2],[0,1,0,0,1,1,0],[0,1,0,0,1,1,1],[0,1,0,0,1,1,2],[0,1,0,1,0,0,0],[0,1,0,1,0,0,1],[0,1,0,1,0,0,2],[0,1,0,1,0,1,0],[0,1,0,1,0,1,1],[0,1,0,1,0,1,2],[0,1,0,1,1,0,0],[0,1,0,1,1,0,1],[0,1,0,1,1,0,2],[0,1,0,1,1,1,0],[0,1,0,1,1,1,1],[0,1,0,1,1,1,2],[0,1,1,0,0,0,0],[0,1,1,0,0,0,1],[0,1,1,0,0,0,2],[0,1,1,0,0,1,0],[0,1,1,0,0,1,1],[0,1,1,0,0,1,2],[0,1,1,0,1,0,0],[0,1,1,0,1,0,1],[0,1,1,0,1,0,2],[0,1,1,0,1,1,0],[0,1,1,0,1,1,1],[0,1,1,0,1,1,2],[0,1,1,1,0,0,0],[0,1,1,1,0,0,1],[0,1,1,1,0,0,2],[0,1,1,1,0,1,0],[0,1,1,1,0,1,1],[0,1,1,1,0,1,2],[0,1,1,1,1,0,0],[0,1,1,1,1,0,1],[0,1,1,1,1,0,2],[0,1,1,1,1,1,0],[0,1,1,1,1,1,1],[0,1,1,1,1,1,2],[0,2,0,0,0,0,0],[0,2,0,0,0,0,1],[0,2,0,0,0,0,2],[0,2,0,0,0,1,0],[0,2,0,0,0,1,1],[0,2,0,0,0,1,2],[0,2,0,0,1,0,0],[0,2,0,0,1,0,1],[0,2,0,0,1,0,2],[0,2,0,0,1,1,0],[0,2,0,0,1,1,1],[0,2,0,0,1,1,2],[0,2,0,1,0,0,0],[0,2,0,1,0,0,1],[0,2,0,1,0,0,2],[0,2,0,1,0,1,0],[0,2,0,1,0,1,1],[0,2,0,1,0,1,2],[0,2,0,1,1,0,0],[0,2,0,1,1,0,1],[0,2,0,1,1,0,2],[0,2,0,1,1,1,0],[0,2,0,1,1,1,1],[0,2,0,1,1,1,2],[0,2,1,0,0,0,0],[0,2,1,0,0,0,1],[0,2,1,0,0,0,2],[0,2,1,0,0,1,0],[0,2,1,0,0,1,1],[0,2,1,0,0,1,2],[0,2,1,0,1,0,0],[0,2,1,0,1,0,1],[0,2,1,0,1,0,2],[0,2,1,0,1,1,0],[0,2,1,0,1,1,1],[0,2,1,0,1,1,2],[0,2,1,1,0,0,0],[0,2,1,1,0,0,1],[0,2,1,1,0,0,2],[0,2,1,1,0,1,0],[0,2,1,1,0,1,1],[0,2,1,1,0,1,2],[0,2,1,1,1,0,0],[0,2,1,1,1,0,1],[0,2,1,1,1,0,2],[0,2,1,1,1,1,0],[0,2,1,1,1,1,1],[0,2,1,1,1,1,2],[0,3,0,0,0,0,0],[0,3,0,0,0,0,1],[0,3,0,0,0,0,2],[0,3,0,0,0,1,0],[0,3,0,0,0,1,1],[0,3,0,0,0,1,2],[0,3,0,0,1,0,0],[0,3,0,0,1,0,1],[0,3,0,0,1,0,2],[0,3,0,0,1,1,0],[0,3,0,0,1,1,1],[0,3,0,0,1,1,2],[0,3,0,1,0,0,0],[0,3,0,1,0,0,1],[0,3,0,1,0,0,2],[0,3,0,1,0,1,0],[0,3,0,1,0,1,1],[0,3,0,1,0,1,2],[0,3,0,1,1,0,0],[0,3,0,1,1,0,1],[0,3,0,1,1,0,2],[0,3,0,1,1,1,0],[0,3,0,1,1,1,1],[0,3,0,1,1,1,2],[0,3,1,0,0,0,0],[0,3,1,0,0,0,1],[0,3,1,0,0,0,2],[0,3,1,0,0,1,0],[0,3,1,0,0,1,1],[0,3,1,0,0,1,2],[0,3,1,0,1,0,0],[0,3,1,0,1,0,1],[0,3,1,0,1,0,2],[0,3,1,0,1,1,0],[0,3,1,0,1,1,1],[0,3,1,0,1,1,2],[0,3,1,1,0,0,0],[0,3,1,1,0,0,1],[0,3,1,1,0,0,2],[0,3,1,1,0,1,0],[0,3,1,1,0,1,1],[0,3,1,1,0,1,2],[0,3,1,1,1,0,0],[0,3,1,1,1,0,1],[0,3,1,1,1,0,2],[0,3,1,1,1,1,0],[0,3,1,1,1,1,1],[0,3,1,1,1,1,2],[1,-1,0,0,0,0,0],[1,-1,0,0,0,0,1],[1,-1,0,0,0,0,2],[1,-1,0,0,0,1,0],[1,-1,0,0,0,1,1],[1,-1,0,0,0,1,2],[1,-1,0,0,1,0,0],[1,-1,0,0,1,0,1],[1,-1,0,0,1,0,2],[1,-1,0,0,1,1,0],[1,-1,0,0,1,1,1],[1,-1,0,0,1,1,2],[1,-1,0,1,0,0,0],[1,-1,0,1,0,0,1],[1,-1,0,1,0,0,2],[1,-1,0,1,0,1,0],[1,-1,0,1,0,1,1],[1,-1,0,1,0,1,2],[1,-1,0,1,1,0,0],[1,-1,0,1,1,0,1],[1,-1,0,1,1,0,2],[1,-1,0,1,1,1,0],[1,-1,0,1,1,1,1],[1,-1,0,1,1,1,2],[1,-1,1,0,0,0,0],[1,-1,1,0,0,0,1],[1,-1,1,0,0,0,2],[1,-1,1,0,0,1,0],[1,-1,1,0,0,1,1],[1,-1,1,0,0,1,2],[1,-1,1,0,1,0,0],[1,-1,1,0,1,0,1],[1,-1,1,0,1,0,2],[1,-1,1,0,1,1,0],[1,-1,1,0,1,1,1],[1,-1,1,0,1,1,2],[1,-1,1,1,0,0,0],[1,-1,1,1,0,0,1],[1,-1,1,1,0,0,2],[1,-1,1,1,0,1,0],[1,-1,1,1,0,1,1],[1,-1,1,1,0,1,2],[1,-1,1,1,1,0,0],[1,-1,1,1,1,0,1],[1,-1,1,1,1,0,2],[1,-1,1,1,1,1,0],[1,-1,1,1,1,1,1],[1,-1,1,1,1,1,2],[1,1,0,0,0,0,0],[1,1,0,0,0,0,1],[1,1,0,0,0,0,2],[1,1,0,0,0,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,2],[1,1,0,0,1,0,0],[1,1,0,0,1,0,1],[1,1,0,0,1,0,2],[1,1,0,0,1,1,0],[1,1,0,0,1,1,1],[1,1,0,0,1,1,2],[1,1,0,1,0,0,0],[1,1,0,1,0,0,1],[1,1,0,1,0,0,2],[1,1,0,1,0,1,0],[1,1,0,1,0,1,1],[1,1,0,1,0,1,2],[1,1,0,1,1,0,0],[1,1,0,1,1,0,1],[1,1,0,1,1,0,2],[1,1,0,1,1,1,0],[1,1,0,1,1,1,1],[1,1,0,1,1,1,2],[1,1,1,0,0,0,0],[1,1,1,0,0,0,1],[1,1,1,0,0,0,2],[1,1,1,0,0,1,0],[1,1,1,0,0,1,1],[1,1,1,0,0,1,2],[1,1,1,0,1,0,0],[1,1,1,0,1,0,1],[1,1,1,0,1,0,2],[1,1,1,0,1,1,0],[1,1,1,0,1,1,1],[1,1,1,0,1,1,2],[1,1,1,1,0,0,0],[1,1,1,1,0,0,1],[1,1,1,1,0,0,2],[1,1,1,1,0,1,0],[1,1,1,1,0,1,1],[1,1,1,1,0,1,2],[1,1,1,1,1,0,0],[1,1,1,1,1,0,1],[1,1,1,1,1,0,2],[1,1,1,1,1,1,0],[1,1,1,1,1,1,1],[1,1,1,1,1,1,2],[1,2,0,0,0,0,0],[1,2,0,0,0,0,1],[1,2,0,0,0,0,2],[1,2,0,0,0,1,0],[1,2,0,0,0,1,1],[1,2,0,0,0,1,2],[1,2,0,0,1,0,0],[1,2,0,0,1,0,1],[1,2,0,0,1,0,2],[1,2,0,0,1,1,0],[1,2,0,0,1,1,1],[1,2,0,0,1,1,2],[1,2,0,1,0,0,0],[1,2,0,1,0,0,1],[1,2,0,1,0,0,2],[1,2,0,1,0,1,0],[1,2,0,1,0,1,1],[1,2,0,1,0,1,2],[1,2,0,1,1,0,0],[1,2,0,1,1,0,1],[1,2,0,1,1,0,2],[1,2,0,1,1,1,0],[1,2,0,1,1,1,1],[1,2,0,1,1,1,2],[1,2,1,0,0,0,0],[1,2,1,0,0,0,1],[1,2,1,0,0,0,2],[1,2,1,0,0,1,0],[1,2,1,0,0,1,1],[1,2,1,0,0,1,2],[1,2,1,0,1,0,0],[1,2,1,0,1,0,1],[1,2,1,0,1,0,2],[1,2,1,0,1,1,0],[1,2,1,0,1,1,1],[1,2,1,0,1,1,2],[1,2,1,1,0,0,0],[1,2,1,1,0,0,1],[1,2,1,1,0,0,2],[1,2,1,1,0,1,0],[1,2,1,1,0,1,1],[1,2,1,1,0,1,2],[1,2,1,1,1,0,0],[1,2,1,1,1,0,1],[1,2,1,1,1,0,2],[1,2,1,1,1,1,0],[1,2,1,1,1,1,1],[1,2,1,1,1,1,2],[1,3,0,0,0,0,0],[1,3,0,0,0,0,1],[1,3,0,0,0,0,2],[1,3,0,0,0,1,0],[1,3,0,0,0,1,1],[1,3,0,0,0,1,2],[1,3,0,0,1,0,0],[1,3,0,0,1,0,1],[1,3,0,0,1,0,2],[1,3,0,0,1,1,0],[1,3,0,0,1,1,1],[1,3,0,0,1,1,2],[1,3,0,1,0,0,0],[1,3,0,1,0,0,1],[1,3,0,1,0,0,2],[1,3,0,1,0,1,0],[1,3,0,1,0,1,1],[1,3,0,1,0,1,2],[1,3,0,1,1,0,0],[1,3,0,1,1,0,1],[1,3,0,1,1,0,2],[1,3,0,1,1,1,0],[1,3,0,1,1,1,1],[1,3,0,1,1,1,2],[1,3,1,0,0,0,0],[1,3,1,0,0,0,1],[1,3,1,0,0,0,2],[1,3,1,0,0,1,0],[1,3,1,0,0,1,1],[1,3,1,0,0,1,2],[1,3,1,0,1,0,0],[1,3,1,0,1,0,1],[1,3,1,0,1,0,2],[1,3,1,0,1,1,0],[1,3,1,0,1,1,1],[1,3,1,0,1,1,2],[1,3,1,1,0,0,0],[1,3,1,1,0,0,1],[1,3,1,1,0,0,2],[1,3,1,1,0,1,0],[1,3,1,1,0,1,1],[1,3,1,1,0,1,2],[1,3,1,1,1,0,0],[1,3,1,1,1,0,1],[1,3,1,1,1,0,2],[1,3,1,1,1,1,0],[1,3,1,1,1,1,1],[1,3,1,1,1,1,2]];

    const percentages = [51.52, 88.77, 99.86, 46.00, 84.45, 99.64, 62.92, 95.01, 99.99, 57.02, 92.20, 99.95, 71.10, 97.65, 99.99, 65.23, 95.89, 99.99, 81.75, 99.41, 99.99, 76.49, 98.74, 99.99, 63.86, 95.38, 99.99, 57.95, 92.69, 99.96, 75.21, 98.52, 99.99, 69.49, 97.23, 99.99, 82.53, 99.49, 99.99, 77.35, 98.87, 99.99, 90.85, 99.93, 99.99, 86.93, 99.79, 99.99, 45.71, 84.20, 99.62, 40.54, 79.20, 99.13, 56.70, 92.02, 99.95, 50.96, 88.37, 99.85, 64.91, 95.77, 99.99, 58.99, 93.23, 99.97, 76.19, 98.69, 99.99, 70.52, 97.50, 99.99, 57.63, 92.52, 99.96, 51.85, 89.00, 99.87, 69.17, 97.14, 99.99, 63.27, 95.14, 99.99, 77.06, 98.83, 99.99, 71.43, 97.73, 99.99, 86.70, 99.77, 99.99, 82.04, 99.44, 99.99, 42.94, 81.63, 99.40, 37.97, 76.36, 98.72, 53.65, 90.20, 99.91, 48.02, 86.15, 99.74, 61.78, 94.53, 99.98, 55.90, 91.56, 99.94, 73.24, 98.13, 99.99, 67.43, 96.62, 99.99, 54.56, 90.77, 99.93, 48.89, 86.83, 99.78, 66.07, 96.18, 99.99, 60.14, 93.79, 99.98, 74.13, 98.32, 99.99, 68.36, 96.91, 99.99, 84.32, 99.63, 99.99, 79.34, 99.15, 99.99, 40.27, 78.91, 99.09, 35.51, 73.41, 98.17, 50.65, 88.15, 99.84, 45.18, 83.72, 99.58, 58.67, 93.06, 99.97, 52.85, 89.68, 99.90, 70.20, 97.42, 99.99, 64.31, 95.55, 99.99, 51.54, 88.79, 99.87, 46.02, 84.47, 99.64, 62.94, 95.01, 99.99, 57.04, 92.21, 99.96, 71.12, 97.65, 99.99, 65.25, 95.89, 99.99, 81.77, 99.41, 99.99, 76.51, 98.74, 99.99, 52.16, 89.22, 99.88, 46.61, 84.98, 99.67, 63.59, 95.27, 99.99, 57.68, 92.55, 99.96, 71.75, 97.80, 99.99, 65.90, 96.12, 99.99, 82.31, 99.47, 99.99, 77.11, 98.84, 99.99, 64.53, 95.63, 99.99, 58.61, 93.04, 99.97, 75.84, 98.63, 99.99, 70.15, 97.40, 99.99, 83.08, 99.53, 99.99, 77.96, 98.96, 99.99, 91.24, 99.94, 99.99, 87.41, 99.81, 99.99, 46.32, 84.72, 99.66, 41.11, 79.79, 99.20, 57.36, 92.38, 99.96, 51.59, 88.82, 99.87, 65.58, 96.01, 99.99, 59.65, 93.55, 99.97, 76.81, 98.79, 99.99, 71.17, 97.66, 99.99, 58.29, 92.87, 99.97, 52.49, 89.44, 99.89, 69.83, 97.32, 99.99, 63.94, 95.41, 99.99, 77.67, 98.92, 99.99, 72.08, 97.88, 99.99, 87.18, 99.80, 99.99, 82.60, 99.49, 99.99, 43.52, 82.20, 99.46, 38.51, 76.98, 98.82, 54.30, 90.61, 99.92, 48.65, 86.64, 99.77, 62.45, 94.81, 99.99, 56.56, 91.94, 99.95, 73.88, 98.27, 99.99, 68.10, 96.83, 99.99, 55.21, 91.16, 99.93, 49.52, 87.32, 99.80, 66.74, 96.40, 99.99, 60.81, 94.10, 99.98, 74.77, 98.44, 99.99, 69.02, 97.10, 99.99, 84.85, 99.67, 99.99, 79.93, 99.22, 99.99, 40.83, 79.51, 99.17, 36.02, 74.05, 98.30, 51.29, 88.61, 99.86, 45.78, 84.26, 99.62, 59.33, 93.40, 99.97, 53.50, 90.10, 99.91, 70.86, 97.59, 99.99, 64.98, 95.80, 99.99, 52.18, 89.23, 99.88, 46.63, 85.00, 99.67, 63.61, 95.28, 99.99, 57.70, 92.57, 99.96, 71.77, 97.81, 99.99, 65.92, 96.13, 99.99, 82.33, 99.47, 99.99, 77.13, 98.84, 99.99];

    let currentQuestionIndex = 0;
    let userAnswers = {}; // Mapping question text to display label
    let rawValues = {}; // Mapping question ID to numerical value

    const quizContent = document.getElementById('quiz-content');
    const quizResult = document.getElementById('quiz-result');
    const resultMessage = document.getElementById('result-message');

    function renderQuestion() {
      if (currentQuestionIndex >= questions.length) {
        showResults();
        return;
      }

      const question = questions[currentQuestionIndex];
      const totalQuestions = questions.length;
      const progressWidth = ((currentQuestionIndex + 1) / totalQuestions) * 100;

      let html = `
        <div class="mb-6">
          <p class="text-sm font-medium text-slate-500 mb-1">Question ${currentQuestionIndex + 1} of ${totalQuestions}</p>
          <div class="h-2 bg-slate-200 rounded-full">
            <div class="h-2 bg-gradient-to-r from-indigo-500 to-fuchsia-500 rounded-full" style="width: ${progressWidth}%"></div>
          </div>
        </div>
        <h3 class="text-xl font-semibold text-slate-900 mb-2">${question.text}</h3>
        <p class="text-xs font-bold text-indigo-500 uppercase tracking-wide mb-6">${question.category}</p>
        <div class="flex flex-col gap-3">
      `;

      if (question.type === 'input') {
        html += `
          <input type="${question.inputType}" id="input-${question.id}" class="w-full border-2 border-slate-200 p-3 rounded-xl focus:border-indigo-500 outline-none text-lg transition" placeholder="Enter your answer..." autofocus>
          <button onclick="handleInputAnswer()" class="w-full bg-indigo-600 text-white font-medium py-3 rounded-xl hover:bg-indigo-700 transition shadow-md mt-2">Next →</button>
        `;
      } 
      else if (question.type === 'choice') {
        question.options.forEach(opt => {
            html += `
            <button onclick="handleChoiceAnswer('${opt.l}', ${opt.v})" class="w-full bg-slate-50 hover:bg-indigo-50 border border-slate-200 text-slate-700 hover:text-indigo-700 font-medium py-3 rounded-xl transition duration-150 text-left px-6 flex justify-between items-center group">
                <span>${opt.l}</span>
                <span class="opacity-0 group-hover:opacity-100 transition">→</span>
            </button>
            `;
        });
      }

      html += `</div>
        <p class="mt-8 text-xs text-center text-slate-400">
          Screening 2.0 • Not medical advice
        </p>`;
      
      quizContent.innerHTML = html;
      
      if(question.type === 'input') {
          setTimeout(() => document.getElementById(`input-${question.id}`).focus(), 100);
      }
    }

    function handleInputAnswer() {
      const q = questions[currentQuestionIndex];
      const val = document.getElementById(`input-${q.id}`).value;
      if (!val) return;
      userAnswers[q.text] = val;
      rawValues[q.id] = parseFloat(val);
      next();
    }

    function handleChoiceAnswer(label, value) {
      const q = questions[currentQuestionIndex];
      userAnswers[q.text] = label;
      rawValues[q.id] = value;
      next();
    }

    function next() {
      currentQuestionIndex++;
      renderQuestion();
    }

    function showResults() {
      quizContent.classList.add('hidden');
      quizResult.classList.remove('hidden');

      // The 7 specific IDs we care about in the specific order:
      // m2 (Bad feelings), m8 (Euphoria), m7 (Disinhibition), m5 (Motor), m1 (Night), m3 (Energy), m4 (Insomnia)
      const targetIds = ["m2", "m8", "m7", "m5", "m1", "m3", "m4"];
      const sessionPattern = targetIds.map(id => rawValues[id]);

      // Match pattern against combos
      const patternString = JSON.stringify(sessionPattern);
      const matchIndex = combos.findIndex(c => JSON.stringify(c) === patternString);
      
      const finalPercentage = matchIndex !== -1 ? percentages[matchIndex] : 0;

      const scoreText = `<span class="block text-5xl font-extrabold text-indigo-600 mt-2 mb-4">${finalPercentage}%</span>`;
      
      let message = "";
      if (finalPercentage > 85) {
        message = `${scoreText} Significant correlation with monitored neural patterns detected. We recommend immediate clinical consultation.`;
      } else if (finalPercentage > 50) {
        message = `${scoreText} Moderate variance detected. Please continue using ReMind for longitudinal tracking.`;
      } else {
        message = `${scoreText} Neural pattern falls within standard parameters. Continue your routine wellness exercises.`;
      }

      resultMessage.innerHTML = message;
      console.log("Full Session Data:", rawValues);
      console.log("Extracted Pattern:", sessionPattern);
    }

    renderQuestion();
  </script>

</body>
</html>